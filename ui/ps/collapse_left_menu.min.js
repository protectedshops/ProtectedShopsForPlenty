"use strict";gx.compatibility.module("collapse_left_menu",["user_configuration_service"],function(e){var n,t=$(this),a=$(".main-left-menu"),r=a.find(".leftmenu_box.current"),d=t.find(".menu-toggle-button"),l=d.find("#menu-button-indicator"),u=a.data("initState"),s={},i=a.css("width"),c=jse.libs.user_configuration_service,o={userId:e.userId,configurationKey:"menuVisibility"},f={collapse:{next:"expand",button:"right","class":"collapsed","do":function(e){x(e)}},expand:{next:"expandAll",button:"down","class":"expanded","do":function(e){g(e)}},expandAll:{next:"collapse",button:"left","class":"expanded-all","do":function(e){v(e)}}},m=function(){return!a.hasClass("collapsed")},p=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n=e,f[n]["do"](t),a&&C(),h()},h=function(){var e="fa fa-caret-",t=f[n].button;l.removeAttr("class").addClass(e+t)},x=function(e){var r=t.parent().find("ul.current");e?a.animate({width:"45px"},300,"swing"):(a.css("width","45px"),$(".columnLeft2").css("width","45px")),r.hide(),$(document).trigger("leftmenu:collapse"),a.find(".leftmenu_head span").fadeOut("fast"),a.removeClass("expanded-all").addClass("collapsed"),a.find(".current:not(li)").removeClass("current"),a.find(".current-menu-head").addClass("current");var d=setInterval(function(){"collapse"===n?$(".leftmenu_head.current").length>1&&(a.find(".leftmenu_head.current:not(.current-menu-head)").removeClass("current"),clearInterval(d)):clearInterval(d)},1)},g=function(){var e=t.parent().find("ul.current");a.animate({width:i},300,"swing"),e.show(),a.find(".leftmenu_head span").fadeIn("slow"),$(document).trigger("leftmenu:expand"),a.removeClass("collapsed"),r.addClass("current")},v=function(e){a.addClass("expanded-all");var n=a.find("div.leftmenu_head:not(.current)");e?n.addClass("current",750,"swing"):n.addClass("current"),$(document).trigger("leftmenu:expand"),a.find("ul.leftmenu_box:not(.current)").addClass("current")},C=function(){c.set({data:$.extend(o,{configurationValue:n})})},_=function(e){d.has(e.target).length&&p(f[n].next,!0)};return s.init=function(e){$("div.leftmenu_head.current").addClass("current-menu-head"),m()||r.removeClass("current"),n=u,""===n&&(n="expand"),p(n,!1,!1),t.on("click",_),e()},s});