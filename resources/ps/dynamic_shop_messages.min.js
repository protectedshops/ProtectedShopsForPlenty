"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};gx.extensions.module("dynamic_shop_messages",[],function(e){var t=$(this),n={url:jse.core.config.get("appUrl")+"/admin/admin.php?do=DynamicShopMessages",lifetime:3e4,responseEnvelope:"MESSAGES"},o=$.extend(!0,{},n,e),r={},i=function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerHTML===e},a=function(e){var t=!1;return"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&(e=[e]),$.each(e,function(){var e=new RegExp(this);if(window.location.href===jse.core.config.get("appUrl")+"/admin/"+this||e.test(window.location.href))return t=!0,!1}),t},c=function(e){$.each(e,function(e,n){try{if(void 0===n.target_page||void 0===n.target_selector)throw new TypeError("No target information provided. Skipping to the next entry...");if(!a(n.target_page))throw new TypeError("The entry is not targeted for the current page. Skipping to the next entry...");var r=Date.now,c=setInterval(function(){var e=t.find(n.target_selector);if(e.length>0){var a=e.html();e.append(n.message),i(e.html())||(e.html(a),jse.core.debug.error("Dynamic message couldn't be applied.",n)),clearInterval(c)}if(Date.now-r>o.lifetime)throw clearInterval(c),Error("Search lifetime limit exceeded, no element matched the provided selector.")},300)}catch(f){return!0}})};return r.init=function(e){$.getJSON(o.url).done(function(e){c(e[o.responseEnvelope])}).fail(function(e,t,n){jse.core.debug.info("Could not load the dynamic shop messages.",e,t,n)}),e()},r});